{"version":3,"file":"index.cf2b1aa4.js","sources":["../../frontend/vite/modulepreload-polyfill","../../frontend/plugin-vue:export-helper","../../frontend/src/components/Alert.vue","../../frontend/src/components/AddressForm.vue","../../frontend/src/components/Stats.vue","../../frontend/src/App.vue","../../frontend/src/formatters.js","../../frontend/src/main.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","\nexport default (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n}\n","<template>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\n    <symbol id=\"check-circle-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n      <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"/>\n    </symbol>\n    <symbol id=\"info-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n      <path d=\"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"/>\n    </symbol>\n    <symbol id=\"exclamation-triangle-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n      <path d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\n    </symbol>\n  </svg>\n\n  <div class=\"alert d-flex align-items-center mt-4\" :class=\"kindClass\" role=\"alert\">\n    <svg class=\"bi flex-shrink-0 me-2\" width=\"24\" height=\"24\" role=\"img\">\n      <template v-if=\"kind == 'success'\">\n        <use xlink:href=\"#check-circle-fill\"/>\n      </template>\n      <template v-else-if=\"kind == 'warning' || kind == 'danger'\">\n        <use xlink:href=\"#exclamation-triangle-fill\"/>\n      </template>\n    </svg>\n    <div>\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: [\n    'kind'\n  ],\n  computed: {\n    kindClass() {\n      return 'alert-' + this.kind;\n      if (this.kind == 'success') {\n        return 'alert-success';\n\n      } else if (this.kind == 'warning') {\n        return 'alert-warning';\n      }\n    }\n  }\n}\n</script>\n","<template>\n  <div style=\"{ opacity: isLoading ? 0.5 : 1 }\" class=\"form-faucet\">\n    <form @submit.prevent=\"giveMe\" :disabled=\"isLoading\">\n      <div class=\"form-floating\">\n        <input ref=\"input\" type=\"text\" v-model=\"address\" @input=\"reset\" :disabled=\"isLoading\" class=\"form-control mb-2\" id=\"address\" autocomplete=\"off\" placeholder=\"0x.....\">\n        <label for=\"address\">Your Ropsten address</label>\n      </div>\n\n      <button class=\"w-100 btn btn-lg btn-primary\" type=\"submit\" :disabled=\"isLoading || !isValid\">Give me Ropsten eth!</button>\n    </form>\n\n    <alert v-if=\"state == 'success'\" kind=\"success\">\n      <small>\n        Sent <b>{{ $format18(amountSent) }}</b> to {{ addressSent }} with tx hash <a :href=\"'https://ropsten.etherscan.io/tx/' + tx\">{{ txHr }}</a>.\n      </small>\n    </alert>\n\n    <alert v-else-if=\"state == 'limited'\" kind=\"warning\">\n      Address limited. Please retry in <b>{{ liftInHr }}</b> at <b>{{ liftAtHr }}.</b>\n    </alert>\n\n    <alert v-else-if=\"state == 'empty'\" kind=\"danger\">\n      Faucet is empty. Please notify me on <a href=\"https://twitter.com/egorfine\">Twitter</a> so that I mine some more rETH.\n    </alert>\n\n    <alert v-else-if=\"state == 'bot'\" kind=\"warning\">\n      Unfortunately, Google Recaptcha failed.\n    </alert>\n\n    <alert v-else-if=\"state == 'fail'\" kind=\"danger\">\n      {{ message }}\n    </alert>\n\n    <div v-else class=\"text-muted mt-1 small\">\n      Please enter valid Ethereum address to get free Ropsten testnet ETH.\n    </div>\n  </div>\n</template>\n\n<script>\nimport Alert from './Alert.vue'\n\nimport dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\ndayjs.extend(relativeTime);\ndayjs.extend(localizedFormat);\n\nexport default {\n  components: {\n    Alert\n  },\n\n  data() {\n    return {\n      state: 'idle',\n\n      message: null,\n      address: '',\n      addressSent: '',\n      amountSent: 0n,\n      tx: null,\n      liftAtUnixtime: 0\n    };\n  },\n\n  computed: {\n    isLoading() {\n      return this.state == 'loading';\n    },\n\n    isValid() {\n      return this.address.startsWith('0x') && this.address.length == 42 && this.address.substr(2).match(/^[0-9A-Fa-f]+$/);\n    },\n\n    liftInHr() {\n      return dayjs().to(dayjs.unix(this.liftAtUnixtime));\n    },\n\n    liftAtHr() {\n      return dayjs.unix(this.liftAtUnixtime).format('LLL');\n    },\n\n    txHr() {\n      const _tx = (this.tx || '').trim();\n      return _tx.substr(0,6) + '..' + _tx.substr(_tx.length-6);\n    }\n  },\n\n  mounted() {\n    this.$refs.input.focus();\n  },\n\n  methods: {\n    reset() {\n      this.state = 'idle';\n      this.tx = null;\n      this.message = '';\n    },\n\n    async giveMe() {\n      grecaptcha.ready(async () => {\n        const token = await grecaptcha.execute('6LdUTFcdAAAAAH6Xu8p8x8eBdmAOzjinOn5Fomk_', { action: 'submit' });\n        this.proceedWithRequest(token);\n      });\n    },\n\n    async proceedWithRequest(token) {\n      this.state = 'loading';\n\n      this.tx = null;\n      this.message = '';\n\n      const options = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'same-origin',\n        body: JSON.stringify({ address: this.address, token })\n      };\n\n      let json = null;\n\n      try {\n        const response = await window.fetch(this.$root.urlPrefix + '/api/gimme/', options);\n        json = await response.json();\n      } catch (e) {\n        // console.error(e);\n      }\n\n      if (!json) {\n        this.state = 'fail';\n        this.message = \"Failure :-(\";\n        return;\n      }\n\n      if (!json.success) {\n        if (json.isLimited) {\n          this.state = 'limited';\n          this.liftAtUnixtime = json.liftAtUnixtime;\n\n        } else if (json.isEmpty) {\n          this.state = 'empty';\n\n        } else if (json.isBot) {\n          this.state = 'bot';\n\n        } else {\n          this.state = 'fail';\n          this.message = json.message || \"Oops\";\n        }\n\n        return;\n      }\n\n      this.state = 'success';\n\n      this.tx = json.tx;\n      this.addressSent = json.address;\n      this.amountSent = BigInt(json.amount);\n      this.address = '';\n    }\n  }\n};\n</script>\n","<template>\n  <div v-if=\"isLoading\">\n    Loading stats...\n  </div>\n\n  <div v-else>\n    <b>{{ $format18(balance) }}&nbsp;rETH</b> available now at faucet<br/>\n    <a class=\"small\" :href=\"'https://ropsten.etherscan.io/address/' + address\">{{ addressHr }}</a><br/>\n    <br/>\n\n    <b>{{ $format18(weiPerAddress) }}&nbsp;rETH</b> daily limit per address.\n    <br/>\n    <br/>\n\n    <span class=\"blockNumber small danger\" v-if=\"!blockTimestamp\">No last block information (stalled?)</span>\n    <span class=\"blockNumber small danger\" v-else-if=\"isBlockTooOld\">Stalled at block {{ blockNumber }} ({{ blockTimestampHr }})</span>\n    <span class=\"blockNumber small\" v-else>Currently at block {{ blockNumber }}</span>\n    <br/>\n  </div>\n</template>\n\n<style scoped>\n.danger {\n  color: rgb(167, 0, 0) !important;\n}\n\n.blockNumber {\n  color: gray;\n  font-weight: 300;\n}\n</style>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue';\nimport dayjs from 'dayjs';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\ndayjs.extend(localizedFormat);\n\nconst isLoading = ref(true);\nconst balance = ref(0);\nconst weiPerAddress = ref(0);\nconst address = ref('');\nconst blockNumber = ref(null);\nconst blockTimestamp = ref(null);\n\nconst loadStats = async () => {\n  let json = null;\n\n  try {\n    const response = await window.fetch(window.urlPrefix + '/api/stats/');\n    json = await response.json();\n  } catch {}\n\n  if (!json) {\n    return;\n  }\n\n  balance.value = BigInt(json.balance);\n  weiPerAddress.value = BigInt(json.weiPerAddress);\n  address.value = json.address;\n  blockNumber.value = json.blockNumber;\n  blockTimestamp.value = json.blockTimestamp;\n};\n\nonMounted(async () => {\n  await loadStats();\n  isLoading.value = false;\n  setInterval(loadStats, 30000);\n});\n\nconst blockAgeSeconds = computed(() => blockTimestamp.value ? Math.floor(Date.now() / 1000) - blockTimestamp.value : null);\n\nconst blockTimestampHr = computed(() => {\n  if (!blockTimestamp.value) {\n    return 'unknown';\n  }\n\n  return dayjs.unix(blockTimestamp.value).format('LLLL');\n\n  if (blockAgeSeconds.value < 60) {\n    return blockAgeSeconds.value + 's ago';\n  }\n\n  return \"more than 1m ago\";\n});\n\nconst addressHr = computed(() => {\n  if (!address.value) {\n    return '';\n  }\n\n  return address.value.substr(0, 6) + ' ... ' + address.value.substr(-4);\n});\n\nconst isBlockTooOld = computed(() => (blockAgeSeconds.value >= 135));\n</script>\n","<template>\n<main class=\"container mt-5\">\n  <div class=\"text-danger fs-4 text-center my-5\">\n    <b>Dec 10, 08:46 UTC</b><br/>Warning! It seems that Ropsten network is either congested or split at the moment. Transactions may fail.\n  </div>\n\n  <div class=\"row\">\n    <div class=\"col-md-6 col-sm-12\">\n      <h1 class=\"h3 mt-3 mb-4 fw-normal\">Ropsten testnet faucet</h1>\n      <AddressForm/>\n    </div>\n\n    <div class=\"col-md-6 col-sm-12 text-muted\">\n      <h1 class=\"h3 mt-3 mb-4 fw-light\">Faucet stats</h1>\n      <Stats/>\n    </div>\n  </div>\n\n  <p class=\"mt-5 mb-1 text-muted\">\n    &copy; 2021 Egor Egorov\n  </p>\n\n  <p class=\"mb-3 text-muted\">\n    <a href=\"https://github.com/egorFiNE/ropstenfaucet\">github</a>\n    <span class=\"ms-2 separator\">|</span>\n    <a class=\"ms-2\" href=\"https://twitter.com/egorFiNE\">twitter</a>\n    <span class=\"ms-2 separator\">|</span>\n    <a class=\"ms-2\" href=\"mailto:me@egorfine.com\">me@egorfine.com</a>\n  </p>\n</main>\n</template>\n\n<script>\nimport AddressForm from './components/AddressForm.vue'\nimport Stats from './components/Stats.vue'\n\nexport default {\n  components: {\n    AddressForm,\n    Stats\n  },\n\n  setup() {\n    window.urlPrefix = import.meta.env.PROD ? '' : 'http://localhost:3090';\n  },\n\n  data() {\n    return {\n      urlPrefix: import.meta.env.PROD ? '' : 'http://localhost:3090'\n    };\n  }\n};\n</script>\n","const formatter = new Intl.NumberFormat('en-US', { useGrouping: true, minimumFractionDigits: 4 });\n\nexport function format18(value) {\n  const b = BigInt(value) / 10n ** 14n;\n  return formatter.format(Number(b.toString()) / 10**4);\n}\n\nexport default {\n  install: (app) => {\n    app.config.globalProperties.$format18 = (value, defaultValue = '') => {\n      if ((value ?? null) === null) {\n        return defaultValue;\n      }\n\n      return format18(value);\n    };\n  }\n};\n","import { createApp } from 'vue'\nimport App from './App.vue'\nimport formatters from './formatters.js';\n\nimport 'bootstrap';\nimport './main.scss';\n\ncreateApp(App).use(formatters).mount('#app')\n"],"names":["_hoisted_1","_openBlock","_createTextVNode","_createElementBlock","_hoisted_7","_hoisted_10","_hoisted_11","_hoisted_12","_createElementVNode"],"mappings":"0NAAA,KAAM,GAAI,UAAoB,CAC1B,KAAM,GAAU,SAAS,cAAc,QAAQ,QAC/C,GAAI,GAAW,EAAQ,UAAY,EAAQ,SAAS,iBAChD,OAEJ,SAAW,KAAQ,UAAS,iBAAiB,6BACzC,EAAe,GAEnB,GAAI,kBAAiB,AAAC,GAAc,CAChC,SAAW,KAAY,GACnB,GAAI,EAAS,OAAS,YAGtB,SAAW,KAAQ,GAAS,WACxB,AAAI,EAAK,UAAY,QAAU,EAAK,MAAQ,iBACxC,EAAe,KAG5B,QAAQ,SAAU,CAAE,UAAW,GAAM,QAAS,KACjD,WAAsB,EAAQ,CAC1B,KAAM,GAAY,GAClB,MAAI,GAAO,WACP,GAAU,UAAY,EAAO,WAC7B,EAAO,gBACP,GAAU,eAAiB,EAAO,gBACtC,AAAI,EAAO,cAAgB,kBACvB,EAAU,YAAc,UACvB,AAAI,EAAO,cAAgB,YAC5B,EAAU,YAAc,OAExB,EAAU,YAAc,cACrB,EAEX,WAAwB,EAAM,CAC1B,GAAI,EAAK,GAEL,OACJ,EAAK,GAAK,GAEV,KAAM,GAAY,EAAa,GAC/B,MAAM,EAAK,KAAM,KAEvB,AAAoB,ICzCtB,MAAe,CAAC,EAAK,IAAU,CAC7B,KAAM,GAAS,EAAI,WAAa,EAChC,SAAW,CAAC,EAAK,IAAQ,GACvB,EAAO,GAAO,EAEhB,MAAO,ICuBT,SACE,MAAO,CACL,QAEF,SAAU,CACR,WAAY,CACV,MAAO,SAAW,KAAK,6jCArBU,MAAM,wBAAK,WAAY,2BAEjD,4CAGA,8FANXA,WAAqE,+GAK5CC,4CACnB,+GC0BR,EAAM,OAAO,GACb,EAAM,OAAO,GAEb,SACE,WAAY,CACV,SAGF,MAAO,CACL,MAAO,CACL,MAAO,OAEP,QAAS,KACT,QAAS,GACT,YAAa,GACb,WAAY,GACZ,GAAI,KACJ,eAAgB,IAIpB,SAAU,CACR,WAAY,CACV,MAAO,MAAK,OAAS,WAGvB,SAAU,CACR,MAAO,MAAK,QAAQ,WAAW,OAAS,KAAK,QAAQ,QAAU,IAAM,KAAK,QAAQ,OAAO,GAAG,MAAM,mBAGpG,UAAW,CACT,MAAO,KAAQ,GAAG,EAAM,KAAK,KAAK,kBAGpC,UAAW,CACT,MAAO,GAAM,KAAK,KAAK,gBAAgB,OAAO,QAGhD,MAAO,CACL,KAAM,GAAO,MAAK,IAAM,IAAI,OAC5B,MAAO,GAAI,OAAO,EAAE,GAAK,KAAO,EAAI,OAAO,EAAI,OAAO,KAI1D,SAAU,CACR,KAAK,MAAM,MAAM,SAGnB,QAAS,CACP,OAAQ,CACN,KAAK,MAAQ,OACb,KAAK,GAAK,KACV,KAAK,QAAU,SAGX,SAAS,CACb,WAAW,MAAM,SAAY,CAC3B,KAAM,GAAQ,KAAM,YAAW,QAAQ,2CAA4C,CAAE,OAAQ,WAC7F,KAAK,mBAAmB,WAItB,oBAAmB,EAAO,CAC9B,KAAK,MAAQ,UAEb,KAAK,GAAK,KACV,KAAK,QAAU,GAEf,KAAM,GAAU,CACd,OAAQ,OACR,QAAS,CACP,eAAgB,oBAElB,YAAa,cACb,KAAM,KAAK,UAAU,CAAE,QAAS,KAAK,QAAS,WAGhD,GAAI,GAAO,KAEX,GAAI,CAEF,EAAO,KAAM,AADI,MAAM,QAAO,MAAM,KAAK,MAAM,UAAY,cAAe,IACpD,YACtB,EAIF,GAAI,CAAC,EAAM,CACT,KAAK,MAAQ,OACb,KAAK,QAAU,cACf,OAGF,GAAI,CAAC,EAAK,QAAS,CACjB,AAAI,EAAK,UACP,MAAK,MAAQ,UACb,KAAK,eAAiB,EAAK,gBAEtB,AAAI,EAAK,QACd,KAAK,MAAQ,QAER,AAAI,EAAK,MACd,KAAK,MAAQ,MAGb,MAAK,MAAQ,OACb,KAAK,QAAU,EAAK,SAAW,QAGjC,OAGF,KAAK,MAAQ,UAEb,KAAK,GAAK,EAAK,GACf,KAAK,YAAc,EAAK,QACxB,KAAK,WAAa,OAAO,EAAK,QAC9B,KAAK,QAAU,SAhK2B,MAAM,aAAa,2NAiBP,2CAGN,WACXC,8GAGU,0FAQrC,IAAK,wFAxBVC,qBAPyB,SAAU,6GAEnB,wBAA+B,kCAAO,gBAAQ,oDAAqB,qBAA0B,0BAAa,aAAmB,wFAIrG,qCAAe,iHAG7B,sDAExBC,8CAAqEF,8JAIxC,sCACHG,+BAAyBC,uEAGxB,qCACGC,2CAGL,4EAIC,ipBCOvC,EAAM,OAAO,GAEb,KAAM,GAAY,EAAI,IAChB,EAAU,EAAI,GACd,EAAgB,EAAI,GACpB,EAAU,EAAI,IACd,EAAc,EAAI,MAClB,EAAiB,EAAI,MAErB,EAAY,SAAY,CAC5B,GAAI,GAAO,KAEX,GAAI,CAEF,EAAO,KAAM,AADI,MAAM,QAAO,MAAM,OAAO,UAAY,gBACjC,YACtB,EAEF,AAAI,CAAC,GAIL,GAAQ,MAAQ,OAAO,EAAK,SAC5B,EAAc,MAAQ,OAAO,EAAK,eAClC,EAAQ,MAAQ,EAAK,QACrB,EAAY,MAAQ,EAAK,YACzB,EAAe,MAAQ,EAAK,iBAG9B,EAAU,SAAY,CACpB,KAAM,KACN,EAAU,MAAQ,GAClB,YAAY,EAAW,OAGzB,KAAM,GAAkB,EAAS,IAAM,EAAe,MAAQ,KAAK,MAAM,KAAK,MAAQ,KAAQ,EAAe,MAAQ,MAE/G,EAAmB,EAAS,IAC3B,EAAe,MAIb,EAAM,KAAK,EAAe,OAAO,OAAO,QAHtC,WAYL,EAAY,EAAS,IACpB,EAAQ,MAIN,EAAQ,MAAM,OAAO,EAAG,GAAK,QAAU,EAAQ,MAAM,OAAO,IAH1D,IAML,EAAgB,EAAS,IAAO,EAAgB,OAAS,2hBC1D/D,UACE,WAAY,CACV,eACA,UAGF,OAAQ,CACN,OAAO,UAAmC,IAG5C,MAAO,CACL,MAAO,CACL,UAAkC,0FA7CZC,EAAK,+JAIxB,MAAM,2pBADb,cAIQ,aADJ,sBAKA,8CCdN,KAAM,IAAY,GAAI,MAAK,aAAa,QAAS,CAAE,YAAa,GAAM,sBAAuB,IAEtF,YAAkB,EAAO,CAC9B,KAAM,GAAI,OAAO,GAAS,KAAO,IACjC,MAAO,IAAU,OAAO,OAAO,EAAE,YAAc,IAAI,GAGrD,OAAe,CACb,QAAS,AAAC,GAAQ,CAChB,EAAI,OAAO,iBAAiB,UAAY,CAAC,EAAO,EAAe,KACxD,IAAS,QAAU,KACf,EAGF,GAAS,KCPtB,EAAU,IAAK,IAAI,IAAY,MAAM"}