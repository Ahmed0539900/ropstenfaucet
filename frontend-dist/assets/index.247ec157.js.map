{"version":3,"file":"index.247ec157.js","sources":["../../frontend/vite/modulepreload-polyfill","../../frontend/src/components/Alert.vue","../../frontend/src/components/AddressForm.vue","../../frontend/src/components/Stats.vue","../../frontend/src/App.vue","../../frontend/src/formatters.js","../../frontend/src/main.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","<template>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\n    <symbol id=\"check-circle-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n      <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"/>\n    </symbol>\n    <symbol id=\"info-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n      <path d=\"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"/>\n    </symbol>\n    <symbol id=\"exclamation-triangle-fill\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n      <path d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\n    </symbol>\n  </svg>\n\n  <div class=\"alert d-flex align-items-center mt-4\" :class=\"kindClass\" role=\"alert\">\n    <svg class=\"bi flex-shrink-0 me-2\" width=\"24\" height=\"24\" role=\"img\">\n      <template v-if=\"kind == 'success'\">\n        <use xlink:href=\"#check-circle-fill\"/>\n      </template>\n      <template v-else-if=\"kind == 'warning' || kind == 'danger'\">\n        <use xlink:href=\"#exclamation-triangle-fill\"/>\n      </template>\n    </svg>\n    <div>\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: [\n    'kind'\n  ],\n  computed: {\n    kindClass() {\n      return 'alert-' + this.kind;\n      if (this.kind == 'success') {\n        return 'alert-success';\n\n      } else if (this.kind == 'warning') {\n        return 'alert-warning';\n      }\n    }\n  }\n}\n</script>\n","<script setup>\nimport Alert from './Alert.vue'\n</script>\n\n<template>\n  <div style=\"{ opacity: isLoading ? 0.5 : 1 }\" class=\"form-faucet\">\n    <form @submit.prevent=\"giveMe\" :disabled=\"isLoading\">\n      <div class=\"form-floating\">\n        <input ref=\"input\" type=\"text\" v-model=\"address\" @input=\"reset\" :disabled=\"isLoading\" class=\"form-control mb-2\" id=\"address\" placeholder=\"0x.....\">\n        <label for=\"address\">Your Ropsten address</label>\n      </div>\n\n      <button class=\"w-100 btn btn-lg btn-primary\" type=\"submit\" :disabled=\"isLoading || !isValid\">Give me Ropsten eth!</button>\n    </form>\n\n    <alert v-if=\"state == 'success'\" kind=\"success\">\n      <small>\n        Sent <b>{{ $format18(amountSent) }}</b> to {{ addressSent }} with tx hash <a :href=\"'https://ropsten.etherscan.io/tx/' + tx\">{{ txHr }}</a>.\n      </small>\n    </alert>\n\n    <alert v-else-if=\"state == 'limited'\" kind=\"warning\">\n      Address limited. Please retry in <b>{{ liftInHr }}</b> at <b>{{ liftAtHr }}.</b>\n    </alert>\n\n    <alert v-else-if=\"state == 'empty'\" kind=\"danger\">\n      Faucet is empty. Please notify me on <a href=\"https://twitter.com/egorfine\">Twitter</a> so that I mine some more rETH.\n    </alert>\n\n    <alert v-else-if=\"state == 'fail'\" kind=\"danger\">\n      {{ message }}\n    </alert>\n\n    <div v-else class=\"text-muted mt-1 small\">\n      Please enter valid Ethereum address to get free Ropsten testnet ETH.\n    </div>\n  </div>\n</template>\n\n<script>\nimport dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\ndayjs.extend(relativeTime);\ndayjs.extend(localizedFormat)\n\nexport default {\n  data() {\n    return {\n      state: 'idle',\n\n      message: null,\n      address: '',\n      addressSent: '',\n      amountSent: 0n,\n      tx: null,\n      liftAtUnixtime: 0\n    };\n  },\n\n  computed: {\n    isLoading() {\n      this.state == 'loading';\n    },\n\n    isValid() {\n      return this.address.startsWith('0x') && this.address.length == 42 && this.address.substr(2).match(/^[0-9A-Fa-f]+$/);\n    },\n\n    liftInHr() {\n      return dayjs().to(dayjs.unix(this.liftAtUnixtime));\n    },\n\n    liftAtHr() {\n      return dayjs.unix(this.liftAtUnixtime).format('LLL');\n    },\n\n    txHr() {\n      const _tx = (this.tx || '').trim();\n      return _tx.substr(0,6) + '..' + _tx.substr(_tx.length-6);\n    }\n  },\n\n  mounted() {\n    this.$refs.input.focus();\n  },\n\n  methods: {\n    reset() {\n      this.state = 'idle';\n      this.tx = null;\n      this.message = '';\n    },\n\n    async giveMe() {\n      this.state = 'loading';\n\n      this.tx = null;\n      this.message = '';\n\n      const options = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'same-origin',\n        body: JSON.stringify({ address: this.address })\n      };\n\n      let json = null;\n\n      try {\n        const response = await window.fetch(this.$root.urlPrefix + '/api/gimme/', options);\n        json = await response.json();\n      } catch (e) {\n        // console.error(e);\n      }\n\n      if (!json) {\n        this.state = 'fail';\n        this.message = \"Failure :-(\";\n        return;\n      }\n\n      if (!json.success) {\n        if (json.isLimited) {\n          this.state = 'limited';\n          this.liftAtUnixtime = json.liftAtUnixtime;\n\n        } else if (json.isEmpty) {\n          this.state = 'empty';\n\n        } else {\n          this.state = 'fail';\n          this.message = json.message || \"Oops\";\n        }\n\n        return;\n      }\n\n      this.state = 'success';\n\n      this.tx = json.tx;\n      this.addressSent = json.address;\n      this.amountSent = BigInt(json.amount);\n      this.address = '';\n    }\n  }\n};\n</script>\n","<template>\n  <div v-if=\"isLoading\">\n    Loading stats...\n  </div>\n\n  <div v-else>\n    <b>{{ $format18(balance) }}&nbsp;rETH</b> available now at faucet<br/>\n    <a class=\"small\" :href=\"'https://ropsten.etherscan.io/address/' + address\">{{ address }}</a><br/>\n    <br/>\n\n    <b>{{ $format18(weiPerAddress) }}&nbsp;rETH</b> daily limit per address.\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      isLoading: true,\n      balance: 0,\n      weiPerAddress: 0,\n      address: ''\n    };\n  },\n\n  mounted() {\n    this.loadStats().then(() => this.isLoading = false);\n    setInterval(() => this.loadStats(), 15000);\n  },\n\n  methods: {\n    async loadStats() {\n      let statusCode = null;\n      let json = null;\n\n      try {\n        const response = await window.fetch(this.$root.urlPrefix + '/api/stats/');\n        statusCode = response.status;\n        json = await response.json();\n      } catch (e) {\n        // console.error(e);\n      }\n\n      if (!json) {\n        return;\n      }\n\n      this.balance = BigInt(json.balance);\n      this.weiPerAddress = BigInt(json.weiPerAddress);\n      this.address = json.address;\n    }\n  }\n};\n</script>\n","<script setup>\nimport AddressForm from './components/AddressForm.vue'\nimport Stats from './components/Stats.vue'\nimport Faq from './components/Faq.vue'\n</script>\n\n<template>\n\n<main class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-6\">\n      <h1 class=\"h3 mb-3 fw-normal\">Ropsten testnet faucet</h1>\n      <AddressForm/>\n    </div>\n\n    <div class=\"col-6 text-muted\">\n      <h1 class=\"h3 mb-3 fw-light\">Faucet stats</h1>\n      <Stats/>\n    </div>\n  </div>\n\n  <div class=\"row mt-5\">\n    <div class=\"col-6\">\n      <Faq/>\n    </div>\n  </div>\n\n  <p class=\"mt-5 mb-3 text-muted\">\n    &copy; 2021 Egor Egorov\n    <span class=\"ms-2 separator\">|</span>\n    <a class=\"ms-2\" href=\"https://github.com/egorFiNE/ropstenfaucet\">github</a>\n    <span class=\"ms-2 separator\">|</span>\n    <a class=\"ms-2\" href=\"https://twitter.com/egorFiNE\">twitter</a>\n  </p>\n</main>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      urlPrefix: import.meta.env.PROD ? '' : 'http://localhost:3090'\n    };\n  }\n};\n</script>\n","const formatter = new Intl.NumberFormat('en-US', { useGrouping: true, minimumFractionDigits: 4 });\n\nexport function format18(value) {\n  const b = BigInt(value) / 10n ** 14n;\n  return formatter.format(Number(b.toString()) / 10**4);\n}\n\nexport default {\n  install: (app) => {\n    app.config.globalProperties.$format18 = (value, defaultValue = '') => {\n      if ((value ?? null) === null) {\n        return defaultValue;\n      }\n\n      return format18(value);\n    };\n  }\n};\n","import { createApp } from 'vue'\nimport App from './App.vue'\nimport formatters from './formatters.js';\n\nimport 'bootstrap';\nimport './main.scss';\n\ncreateApp(App).use(formatters).mount('#app')\n"],"names":["relList","document","createElement","supports","link","querySelectorAll","MutationObserver","mutations","mutation","type","node","addedNodes","tagName","rel","observe","childList","subtree","ep","fetchOpts","script","integrity","referrerpolicy","referrerPolicy","crossorigin","credentials","getFetchOpts","href","p","props","computed","kindClass","this","kind","class","width","height","key","_hoisted_1","dayjs","extend","relativeTime","localizedFormat","data","state","message","address","addressSent","amountSent","tx","liftAtUnixtime","isLoading","isValid","startsWith","length","substr","match","liftInHr","to","unix","liftAtHr","format","txHr","_tx","trim","mounted","$refs","input","focus","methods","reset","options","method","headers","body","JSON","stringify","json","response","window","fetch","$root","urlPrefix","e","success","BigInt","amount","isLimited","isEmpty","balance","weiPerAddress","loadStats","then","statusCode","status","_createElementBlock","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_7","formatter","Intl","NumberFormat","useGrouping","minimumFractionDigits","install","app","config","globalProperties","$format18","value","defaultValue","b","Number","toString","format18","createApp","App","use","formatters","mount"],"mappings":"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"}