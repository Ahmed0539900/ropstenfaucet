import{d as t,r as e,l as s,o as i,c as a,a as n,w as r,v as d,b as o,e as l,t as u,f as c,F as m,g as h,h as f}from"./vendor.5c7d8ac1.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}(),t.extend(e),t.extend(s);const g={data:()=>({state:"idle",message:null,address:"",addressSent:"",amountSent:0n,tx:null,liftAtUnixtime:0}),computed:{isLoading(){this.state},isValid(){return this.address.startsWith("0x")&&42==this.address.length&&this.address.substr(2).match(/^[0-9A-Fa-f]+$/)},liftInHr(){return t().to(t.unix(this.liftAtUnixtime))},liftAtHr(){return t.unix(this.liftAtUnixtime).format("LLL")}},methods:{reset(){this.state="idle",this.tx=null,this.message=""},async giveMe(){this.state="loading",this.tx=null,this.message="";const t={method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({address:this.address})};let e=null;try{const s=await window.fetch(this.$root.urlPrefix+"/api/gimme/",t);e=await s.json()}catch(s){}if(!e)return this.state="fail",void(this.message="Failure :-(");e.success?(this.state="success",this.tx=e.tx,this.addressSent=e.address,this.amountSent=BigInt(e.amount),this.address=""):e.isLimited?(this.state="limited",this.liftAtUnixtime=e.liftAtUnixtime):e.isEmpty?this.state="empty":(this.state="fail",this.message=e.message||"Oops")}}},p={style:{"{ opacity":"isLoading ? 0.5 : 1 }"}},y=["disabled"],b=["disabled"],x=["disabled"],v={key:0},L=["href"],w=l(". "),S={key:1},A={key:2},I=[l(" Oops! Faucet empty. "),n("a",{href:"https://twitter.com/egorfine"},"Hit me up on Twitter",-1),l(" so that I mine some more. ")],P={key:3};g.render=function(t,e,s,m,h,f){return i(),a("div",p,[n("form",{onSubmit:e[2]||(e[2]=o(((...t)=>f.giveMe&&f.giveMe(...t)),["prevent"])),disabled:f.isLoading},[r(n("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>h.address=t),onInput:e[1]||(e[1]=(...t)=>f.reset&&f.reset(...t)),disabled:f.isLoading},null,40,b),[[d,h.address]]),n("button",{type:"submit",disabled:f.isLoading||!f.isValid},"Gimme",8,x)],40,y),"success"==h.state?(i(),a("div",v,[l(" Okay! Sent "+u(t.$format18(h.amountSent))+" to "+u(h.addressSent)+" with tx ",1),n("a",{href:"https://ropsten.etherscan.io/tx/"+h.tx},u(h.tx),9,L),w])):"limited"==h.state?(i(),a("div",S," Oops! Limit engaged, please retry in "+u(f.liftInHr)+" at "+u(f.liftAtHr),1)):"empty"==h.state?(i(),a("div",A,I)):"fail"==h.state?(i(),a("div",P,u(h.message),1)):c("",!0)])};const k={data:()=>({isLoading:!0,balance:0,weiPerAddress:0,address:""}),mounted(){this.loadStats(),setInterval((()=>this.loadStats()),15e3)},methods:{async loadStats(){this.isLoading=!0;let t=null,e=null;try{const s=await window.fetch(this.$root.urlPrefix+"/api/stats/");t=s.status,e=await s.json()}catch(s){}this.isLoading=!1,e&&(this.balance=BigInt(e.balance),this.weiPerAddress=BigInt(e.weiPerAddress),this.address=e.address)}}},F=n("h1",null,"Stats",-1),O={key:0},U={key:1},$=n("br",null,null,-1),N=l(" Faucet address: "),j=["href"],H=n("br",null,null,-1);k.render=function(t,e,s,r,d,o){return i(),a(m,null,[F,d.isLoading?(i(),a("div",O," Loading... ")):(i(),a("div",U,[l(" Faucet balance: "+u(t.$format18(d.balance)),1),$,N,n("a",{href:"https://ropsten.etherscan.io/address/"+d.address},u(d.address),9,j),H,l(" Giving today per address: "+u(t.$format18(d.weiPerAddress)),1)]))],64)};const M=n("h1",null,"Ropsten faucet",-1),B=n("hr",null,null,-1),E=n("hr",null,null,-1),G=l(" FIXME footer and copy ");const T={data:()=>({urlPrefix:""})},V=Object.assign(T,{setup:function(t){return(t,e)=>(i(),a(m,null,[M,h(k),B,h(g),E,G],64))}}),q=new Intl.NumberFormat("en-US",{useGrouping:!0,minimumFractionDigits:4});var C={install:t=>{t.config.globalProperties.$format18=(t,e="")=>null===(t??null)?e:function(t){const e=BigInt(t)/10n**14n;return q.format(Number(e.toString())/1e4)}(t)}};f(V).use(C).mount("#app");
//# sourceMappingURL=index.9cd73054.js.map
