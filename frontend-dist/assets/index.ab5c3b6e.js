import{o as n,c as d,a as t,b as T,r as A,n as S,F as g,d as y,e as h,f as H,l as w,g as v,w as L,v as E,h as $,i as f,j as _,t as l,k as r,m as k,p as N,q as I,s as P}from"./vendor.4a73f171.js";const F=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))m(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&m(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function m(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}};F();var b=(e,a)=>{const i=e.__vccOpts||e;for(const[m,s]of a)i[m]=s;return i};const z={props:["kind"],computed:{kindClass(){return"alert-"+this.kind}}},M=y('<svg xmlns="http://www.w3.org/2000/svg" style="display:none;"><symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path></symbol><symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></symbol><symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path></symbol></svg>',1),C={class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img"},B={key:0,"xlink:href":"#check-circle-fill"},V={key:1,"xlink:href":"#exclamation-triangle-fill"};function R(e,a,i,m,s,o){return n(),d(g,null,[M,t("div",{class:S(["alert d-flex align-items-center mt-4",o.kindClass]),role:"alert"},[(n(),d("svg",C,[i.kind=="success"?(n(),d("use",B)):i.kind=="warning"||i.kind=="danger"?(n(),d("use",V)):T("",!0)])),t("div",null,[A(e.$slots,"default")])],2)],64)}var j=b(z,[["render",R]]);h.extend(H);h.extend(w);const O={components:{Alert:j},data(){return{state:"idle",message:null,address:"",addressSent:"",amountSent:0n,liftAtUnixtime:0}},computed:{isLoading(){return this.state=="loading"},isValid(){return this.address.startsWith("0x")&&this.address.length==42&&this.address.substr(2).match(/^[0-9A-Fa-f]+$/)},liftInHr(){return h().to(h.unix(this.liftAtUnixtime))},liftAtHr(){return h.unix(this.liftAtUnixtime).format("LLL")}},mounted(){this.$refs.input.focus()},methods:{reset(){this.state="idle",this.message=""},async giveMe(){grecaptcha.ready(async()=>{const e=await grecaptcha.execute("6LdUTFcdAAAAAH6Xu8p8x8eBdmAOzjinOn5Fomk_",{action:"submit"});this.proceedWithRequest(e)})},async proceedWithRequest(e){this.state="loading",this.message="";const a={method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({address:this.address,token:e})};let i=null;try{i=await(await window.fetch(this.$root.urlPrefix+"/api/gimme/",a)).json()}catch{}if(!i){this.state="fail",this.message="Failure :-(";return}if(!i.success){i.isLimited?(this.state="limited",this.liftAtUnixtime=i.liftAtUnixtime):i.isEmpty?this.state="empty":i.isBot?this.state="bot":i.isExit?this.state="exit":(this.state="fail",this.message=i.message||"Oops");return}this.state="success",this.address="",this.addressSent=i.address,this.amountSent=BigInt(i.amount)}}},q={style:{"{ opacity":"isLoading ? 0.5 : 1 }"},class:"form-faucet"},U=["disabled"],D={class:"form-floating"},W=["disabled"],G=t("label",{for:"address"},"Your Ropsten address",-1),Y=["disabled"],J=r(" Sucessfully queued "),K=t("br",null,null,-1),Q=t("br",null,null,-1),X=r("Please expect rETH to your address within "),Z=t("b",null,"half an hour.",-1),ee=r(" Address limited. Please retry in "),te=r(" at "),se=r(" Faucet is empty. Please notify me on "),oe=t("a",{href:"https://twitter.com/egorfine"},"Twitter",-1),ae=r(" so that I mine some more rETH. "),ie=r(" Unfortunately, Google Recaptcha verification failed. "),ne=r(" Faucet is restarting now, please try again just a bit later. "),re={key:6,class:"text-muted mt-1 small"};function de(e,a,i,m,s,o){const c=v("alert");return n(),d("div",q,[t("form",{onSubmit:a[2]||(a[2]=$((...u)=>o.giveMe&&o.giveMe(...u),["prevent"])),disabled:o.isLoading},[t("div",D,[L(t("input",{ref:"input",type:"text","onUpdate:modelValue":a[0]||(a[0]=u=>s.address=u),onInput:a[1]||(a[1]=(...u)=>o.reset&&o.reset(...u)),disabled:o.isLoading,class:"form-control mb-2",id:"address",autocomplete:"off",placeholder:"0x....."},null,40,W),[[E,s.address]]),G]),t("button",{class:"w-100 btn btn-lg btn-primary",type:"submit",disabled:o.isLoading||!o.isValid},"Give me Ropsten ETH!",8,Y)],40,U),s.state=="success"?(n(),f(c,{key:0,kind:"success"},{default:_(()=>[t("small",null,[J,t("b",null,l(e.$format18(s.amountSent)),1),r(" to "+l(s.addressSent)+". ",1),K,Q,X,Z])]),_:1})):s.state=="limited"?(n(),f(c,{key:1,kind:"warning"},{default:_(()=>[ee,t("b",null,l(o.liftInHr),1),te,t("b",null,l(o.liftAtHr)+".",1)]),_:1})):s.state=="empty"?(n(),f(c,{key:2,kind:"danger"},{default:_(()=>[se,oe,ae]),_:1})):s.state=="bot"?(n(),f(c,{key:3,kind:"warning"},{default:_(()=>[ie]),_:1})):s.state=="exit"?(n(),f(c,{key:4,kind:"warning"},{default:_(()=>[ne]),_:1})):s.state=="fail"?(n(),f(c,{key:5,kind:"danger"},{default:_(()=>[r(l(s.message),1)]),_:1})):(n(),d("div",re," Please enter valid Ethereum address to get free Ropsten testnet ETH. "))])}var le=b(O,[["render",de]]);h.extend(w);const ce={computed:{blockAgeSeconds(){return this.$root.blockTimestamp?Math.floor(Date.now()/1e3)-this.$root.blockTimestamp:null},blockTimestampHr(){return this.$root.blockTimestamp?h.unix(this.$root.blockTimestamp).format("LLLL"):"unknown"},isBlockTooOld(){this.$root.blockAgeSeconds>=135},addressHr(){return this.$root.address?this.$root.address.substr(0,6)+" ... "+this.$root.address.substr(-4):""}}},me=r(" Loading stats... "),ue={class:"mb-2"},he=r(" available "),pe={class:"mb-2"},fe=r(" daily limit per address "),_e={class:"mb-2"},be=r(" recipients queued "),ge={class:"mb-4"},ve=r(" Faucet "),ye=["href"],ke={key:0,class:"blockNumber small danger"},we={key:1,class:"blockNumber small danger"},$e={key:2,class:"blockNumber small"};function xe(e,a,i,m,s,o){return e.$root.isStatsLoading?(n(),d(g,{key:0},[me],64)):(n(),d(g,{key:1},[t("div",ue,[t("b",null,l(e.$format18(e.$root.balance))+"\xA0rETH",1),he]),t("div",pe,[t("b",null,l(e.$format18(e.$root.weiPerAddress))+"\xA0rETH",1),fe]),t("div",_e,[t("b",null,l(e.$root.queueSize),1),be]),t("div",ge,[ve,t("a",{href:"https://ropsten.etherscan.io/address/"+e.$root.address},l(o.addressHr),9,ye)]),e.$root.blockTimestamp?o.isBlockTooOld?(n(),d("div",we,"Stalled at block "+l(e.$root.blockNumber)+" ("+l(o.blockTimestampHr)+")",1)):(n(),d("div",$e,"Currently at block "+l(e.$root.blockNumber),1)):(n(),d("div",ke,"No last block information (stalled?)"))],64))}var Te=b(ce,[["render",xe],["__scopeId","data-v-207f5a32"]]);const Ae={components:{AddressForm:le,Stats:Te},setup(){window.urlPrefix=""},data(){return{urlPrefix:"",isStatsLoading:!0,balance:0,weiPerAddress:0,address:"",donationsToAddress:"",blockNumber:null,blockTimestamp:null,queueSize:null,isCopied:!1}},computed:{addressHr(){return this.address?this.address.substr(0,6)+" ... "+this.address.substr(-4):""}},mounted(){this.loadStats(),setInterval(this.loadStats.bind(this),3e4)},methods:{async loadStats(){let e=null;try{e=await(await window.fetch(window.urlPrefix+"/api/stats/")).json()}catch{}!e||(this.balance=BigInt(e.balance),this.weiPerAddress=BigInt(e.weiPerAddress),this.address=e.address,this.donationsToAddress=e.donationsToAddress,this.blockNumber=e.blockNumber,this.blockTimestamp=e.blockTimestamp,this.queueSize=e.queueSize,this.isStatsLoading=!1)},copyAddress(){navigator.clipboard.writeText(this.donationsToAddress),this.isCopied=!0,setTimeout(()=>this.isCopied=!1,1e3)}}},p=e=>(N("data-v-22408db7"),e=e(),I(),e),Se={class:"container mt-5"},He={class:"row"},Le={class:"col-md-6 my-4 col-sm-12"},Ee=p(()=>t("h1",{class:"h3 mb-4 fw-normal"},"Ropsten testnet faucet",-1)),Ne={class:"col-md-6 my-4 col-sm-12 text-muted"},Ie=p(()=>t("h1",{class:"h3 mb-4 fw-light"},"Faucet stats",-1)),Pe=y('<div class="col-md-6 my-4 col-sm-12" data-v-22408db7><h1 class="h3 mb-4 fw-normal" data-v-22408db7>Need more rETH?</h1><div data-v-22408db7><p data-v-22408db7> Most probably you don&#39;t. </p><p data-v-22408db7> There is no USDT on Ropsten, there is no price for Ropsten ETH, every amount and <b data-v-22408db7>every price is arbitrary</b> and transactions cost pennies. You can test everything with arbitrary rETH amount. </p><p data-v-22408db7> If you need to test something that depends on fixed ETH values, you can either scale everything down 10x or 1000x or use wrapped ETH and change <code data-v-22408db7>decimals()</code> to something smaller than the usual 18. </p></div></div><div class="col-md-6 my-4 col-sm-12" data-v-22408db7><h1 class="h3 mb-4 fw-normal" data-v-22408db7>Did not receive your rETH?</h1><div data-v-22408db7><p data-v-22408db7> EVM blockchains in general and Ropsten network in particular are incredibly fragile, unreliable and hostile environments. Transactions do get lost, sometimes fail to mine, gas limits are estimated incorrectly, network explorer loses records, etc. Infura sometimes misreport nonces, and Alchemy sometimes report non-existing transactions. </p><p data-v-22408db7> Rants off. If you are willing to help: please see <code data-v-22408db7>possiblyRunQueue()</code> in <a href="https://github.com/egorFiNE/ropstenfaucet/blob/master/backend/index.mjs" data-v-22408db7><code data-v-22408db7>index.mjs</code></a> and send me a pull request. I&#39;d greatly appreciate that. </p><p data-v-22408db7> Note to Infura/Alchemy: get in touch with me by <a href="mailto:me@egorfine.com" data-v-22408db7>email</a> and let&#39;s crush those bugs. </p></div></div>',2),Fe={class:"col-md-6 my-4 col-sm-12"},ze=p(()=>t("h1",{class:"h3 mb-4 fw-normal"},"Please donate",-1)),Me=p(()=>t("p",null,[r(" This faucet is now depleting faster than I can mine. Please send your "),t("b",null,"unused Ropsten ETH"),r(" back to the faucet to share with fellow developers. ")],-1)),Ce=p(()=>t("p",null,[r(" Please also "),t("b",null,"consider donating."),r(" Your funds will help me continue running miner hardware for Ropsten and other PoW testnets. I accept donations on the same address on pretty much all major EVM network. Much appreciated! ")],-1)),Be=p(()=>t("p",{class:"fw-bold"}," Please send rETH and/or donations to: ",-1)),Ve={class:""},Re={style:{color:"gray"},class:"me-2"},je={key:0,class:"copy-address"},Oe=p(()=>t("svg",{width:"13","aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"copy",class:"svg-inline--fa fa-copy fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},[t("path",{fill:"currentColor",d:"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"})],-1)),qe=[Oe],Ue=y('<p class="mt-5 mb-1 text-muted" data-v-22408db7> \xA9 2021-2022 Egor Egorov </p><p class="mb-3 text-muted small" data-v-22408db7><a href="https://github.com/egorFiNE/ropstenfaucet" data-v-22408db7>github</a><span class="ms-2 separator" data-v-22408db7>|</span><a class="ms-2" href="https://twitter.com/egorFiNE" data-v-22408db7>twitter</a><span class="ms-2 separator" data-v-22408db7>|</span><a class="ms-2" href="mailto:me@egorfine.com" data-v-22408db7>me@egorfine.com</a></p>',2);function De(e,a,i,m,s,o){const c=v("AddressForm"),u=v("Stats");return n(),d("main",Se,[t("div",He,[t("div",Le,[Ee,k(c)]),t("div",Ne,[Ie,k(u)]),Pe,t("div",Fe,[ze,t("div",null,[Me,Ce,Be,t("p",Ve,[t("code",Re,l(s.donationsToAddress),1),s.isCopied?(n(),d("span",je,"\u2713")):(n(),d("span",{key:1,onClick:a[0]||(a[0]=$((...x)=>o.copyAddress&&o.copyAddress(...x),["prevent"])),class:"copy-address"},qe))])])])]),Ue])}var We=b(Ae,[["render",De],["__scopeId","data-v-22408db7"]]);const Ge=new Intl.NumberFormat("en-US",{useGrouping:!0,minimumFractionDigits:4});function Ye(e){const a=BigInt(e)/10n**14n;return Ge.format(Number(a.toString())/10**4)}var Je={install:e=>{e.config.globalProperties.$format18=(a,i="")=>(a??null)===null?i:Ye(a)}};P(We).use(Je).mount("#app");
//# sourceMappingURL=index.ab5c3b6e.js.map
